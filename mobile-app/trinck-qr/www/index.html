<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <title>Trinck QR Manager</title>
    
    <!-- Cordova CSS -->
    <link rel="stylesheet" type="text/css" href="css/index.css">
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
</head>
<body>
    <div class="app">
        <!-- Splash Screen -->
        <div id="splashScreen" class="splash-screen">
            <div class="splash-content">
                <img src="img/logo.png" alt="Trinck" class="splash-logo">
                <h1>Trinck</h1>
                <p>QR Code Manager</p>
                <div class="loading-spinner"></div>
            </div>
        </div>

        <!-- Main App -->
        <div id="mainApp" class="main-app" style="display: none;">
            <!-- Header -->
            <div class="header">
                <button class="back-btn" id="backBtn" style="display: none;">
                    <span>‚Üê</span>
                </button>
                <div class="header-content">
                    <img src="img/logo.png" alt="Trinck" class="header-logo">
                    <h1>Trinck</h1>
                    <p>QR Code Manager</p>
                </div>
            </div>

            <!-- Main Menu -->
            <div id="mainMenu" class="screen active">
                <div class="menu-grid">
                    <div class="menu-item" data-screen="generator">
                        <div class="menu-icon">üì±</div>
                        <h3>Generate QR</h3>
                        <p>Create QR codes</p>
                    </div>
                    
                    <div class="menu-item" data-screen="camera">
                        <div class="menu-icon">üì∑</div>
                        <h3>Camera Scan</h3>
                        <p>Live QR scanning</p>
                    </div>
                    
                    <div class="menu-item" data-screen="gallery">
                        <div class="menu-icon">üñºÔ∏è</div>
                        <h3>Gallery Scan</h3>
                        <p>Scan from photos</p>
                    </div>
                    
                    <div class="menu-item" data-screen="jobs">
                        <div class="menu-icon">üöõ</div>
                        <h3>Job QRs</h3>
                        <p>Trucking jobs</p>
                    </div>
                    
                    <div class="menu-item" data-screen="history">
                        <div class="menu-icon">üìã</div>
                        <h3>History</h3>
                        <p>Recent QRs</p>
                    </div>
                    
                    <div class="menu-item" id="websiteBtn">
                        <div class="menu-icon">üåê</div>
                        <h3>Website</h3>
                        <p>Open Trinck</p>
                    </div>
                </div>
            </div>

            <!-- QR Generator Screen -->
            <div id="generator" class="screen">
                <div class="screen-content">
                    <h2>Generate QR Code</h2>
                    
                    <div class="form-group">
                        <label>QR Type:</label>
                        <select id="qrType">
                            <option value="text">Text/URL</option>
                            <option value="job">Job Details</option>
                            <option value="contact">Contact</option>
                            <option value="wifi">WiFi</option>
                        </select>
                    </div>

                    <div id="textForm" class="form-section">
                        <div class="form-group">
                            <label>Text/URL:</label>
                            <textarea id="qrText" placeholder="Enter text or URL"></textarea>
                        </div>
                    </div>

                    <div id="jobForm" class="form-section" style="display: none;">
                        <div class="form-group">
                            <label>Job ID:</label>
                            <input type="text" id="jobId" placeholder="TRK123456">
                        </div>
                        <div class="form-group">
                            <label>Customer:</label>
                            <input type="text" id="customerName" placeholder="Customer Name">
                        </div>
                        <div class="form-group">
                            <label>Pickup:</label>
                            <input type="text" id="pickupLocation" placeholder="Pickup Address">
                        </div>
                        <div class="form-group">
                            <label>Delivery:</label>
                            <input type="text" id="deliveryLocation" placeholder="Delivery Address">
                        </div>
                    </div>

                    <div id="contactForm" class="form-section" style="display: none;">
                        <div class="form-group">
                            <label>Name:</label>
                            <input type="text" id="contactName" placeholder="Contact Name">
                        </div>
                        <div class="form-group">
                            <label>Phone:</label>
                            <input type="text" id="contactPhone" placeholder="+91 98765 43210">
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" id="contactEmail" placeholder="email@example.com">
                        </div>
                    </div>

                    <div id="wifiForm" class="form-section" style="display: none;">
                        <div class="form-group">
                            <label>Network Name:</label>
                            <input type="text" id="wifiSSID" placeholder="WiFi Network Name">
                        </div>
                        <div class="form-group">
                            <label>Password:</label>
                            <input type="password" id="wifiPassword" placeholder="WiFi Password">
                        </div>
                        <div class="form-group">
                            <label>Security:</label>
                            <select id="wifiSecurity">
                                <option value="WPA">WPA/WPA2</option>
                                <option value="WEP">WEP</option>
                                <option value="nopass">Open</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn primary" onclick="generateQR()">Generate QR Code</button>
                    
                    <div id="qrResult" class="qr-result" style="display: none;">
                        <canvas id="qrCanvas"></canvas>
                        <div class="qr-actions">
                            <button class="btn secondary" onclick="saveQR()">Save to Gallery</button>
                            <button class="btn secondary" onclick="shareQR()">Share</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Camera Scanner Screen -->
            <div id="camera" class="screen">
                <div class="screen-content">
                    <h2>Camera QR Scanner</h2>
                    <div class="camera-container">
                        <video id="cameraPreview" autoplay playsinline></video>
                        <div class="camera-overlay">
                            <div class="scan-frame"></div>
                        </div>
                        <button class="btn primary" id="captureBtn">Capture & Scan</button>
                    </div>
                    <div id="cameraResult" class="scan-result" style="display: none;"></div>
                </div>
            </div>

            <!-- Gallery Scanner Screen -->
            <div id="gallery" class="screen">
                <div class="screen-content">
                    <h2>Scan from Gallery</h2>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üì∑</div>
                        <h3>Select Image</h3>
                        <p>Choose a photo containing QR code</p>
                        <button class="btn primary" onclick="selectImage()">Choose from Gallery</button>
                    </div>
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <div id="galleryResult" class="scan-result" style="display: none;"></div>
                </div>
            </div>

            <!-- Job QRs Screen -->
            <div id="jobs" class="screen">
                <div class="screen-content">
                    <h2>Job QR Codes</h2>
                    <div class="job-buttons">
                        <button class="btn primary" onclick="generateJobQR('pickup')">Pickup QR</button>
                        <button class="btn primary" onclick="generateJobQR('delivery')">Delivery QR</button>
                        <button class="btn primary" onclick="generateJobQR('verification')">Verification QR</button>
                    </div>
                    <div id="jobQrResult" class="qr-result" style="display: none;">
                        <canvas id="jobQrCanvas"></canvas>
                        <div id="jobInfo" class="job-info"></div>
                        <div class="qr-actions">
                            <button class="btn secondary" onclick="saveJobQR()">Save to Gallery</button>
                            <button class="btn secondary" onclick="shareJobQR()">Share</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Screen -->
            <div id="history" class="screen">
                <div class="screen-content">
                    <h2>QR History</h2>
                    <div id="historyList" class="history-list">
                        <p class="empty-state">No QR codes generated yet.</p>
                    </div>
                    <button class="btn secondary" onclick="clearHistory()">Clear History</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cordova Scripts -->
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
</body>
</html>
